<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <meta charset=utf-8  /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com" rel=preconnect  crossorigin=""> <link rel=stylesheet  href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"> <style> body, input { font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif } code, kbd, pre { font-family: "Roboto Mono", "Courier New", Courier, monospace } </style> <link rel=stylesheet  href="../_static/stylesheets/application.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="../_static/fonts/material-icons.css"/> <meta name=theme-color  content="#2196f3"> <script src="../_static/javascripts/modernizr.js"></script> <title>System Regression Estimators &#8212; linearmodels 4.14 documentation</title> <link rel=apple-touch-icon  sizes=180x180  href="../_static/icons/apple-touch-icon.png"> <link rel=icon  type="image/png" sizes=32x32  href="../_static/icons/favicon-32x32.png"> <link rel=icon  type="image/png" sizes=16x16  href="../_static/icons/favicon-16x16.png"> <link rel=manifest  href="../_static/icons/site.webmanifest"> <link rel=mask-icon  href="../_static/icons/safari-pinned-tab.svg" color="#2196f3"> <link rel="shortcut icon" href="../_static/icons/favicon.ico"> <meta name=msapplication-TileColor  content="#f8f8f8"> <meta name=msapplication-config  content="../_static/icons/browserconfig.xml"> <style> .highlight { background-color: hsla(0,0%,92.5%,.5) !important; } </style> <link rel=stylesheet  href="../_static/material.css" type="text/css" /> <link rel=stylesheet  href="../_static/pygments.css" type="text/css" /> <script type="text/javascript" id=documentation_options  data-url_root="../" src="../_static/documentation_options.js"></script> <script type="text/javascript" src="../_static/jquery.js"></script> <script type="text/javascript" src="../_static/underscore.js"></script> <script type="text/javascript" src="../_static/doctools.js"></script> <script type="text/javascript" src="../_static/language_data.js"></script> <script crossorigin=anonymous  integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script> <script async=async  type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script> <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script> <link rel="shortcut icon" href="../_static/favicon.ico"/> <link rel=index  title=Index  href="../genindex.html" /> <link rel=search  title=Search  href="../search.html" /> <link rel=next  title="Estimation Results" href=results.html  /> <link rel=prev  title="Module Reference" href=reference.html  /> <body dir=ltr data-md-color-primary=blue data-md-color-accent=orange> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github > <path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"></path> </svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#system/models" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class=md-flex > <div class="md-flex__cell md-flex__cell--shrink"> <a href="../index.html" title="linearmodels 4.14 documentation" class="md-header-nav__button md-logo"> <img src="../_static/bw-logo.svg" height=26  alt="linearmodels 4.14 documentation logo"> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >linearmodels 4.14</span> <span class=md-header-nav__topic > System Regression Estimators </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action="../search.html" method=GET  name=search > <input type=text  class=md-search__input  name=q  placeholder=Search  autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source > <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > linearmodels </div> </a> </div> </div> </div> </nav> </header> <div class=md-container > <nav class=md-tabs  data-md-component=tabs > <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list > <li class=md-tabs__item ><a href=index.html  class=md-tabs__link >System Regression Models</a> <li class=md-tabs__item ><a href=reference.html  class=md-tabs__link >Module Reference</a> </ul> </div> </nav> <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <label class="md-nav__title md-nav__title--site" for=__drawer > <a href="../index.html" title="linearmodels 4.14 documentation" class="md-nav__button md-logo"> <img src="../_static/bw-logo.svg" alt=" logo" width=48  height=48 > </a> <a href="../index.html" title="linearmodels 4.14 documentation">linearmodels 4.14</a> </label> <div class=md-nav__source > <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > linearmodels </div> </a> </div> <ul class=md-nav__list > <li class=md-nav__item > <a href="../iv/index.html" class=md-nav__link >Instrumental Variable Estimation</a> <li class=md-nav__item > <a href="../panel/index.html" class=md-nav__link >Panel Data Model Estimation</a> <li class=md-nav__item > <a href="../asset-pricing/index.html" class=md-nav__link >Linear Factor Models for Asset Pricing</a> <li class=md-nav__item > <a href=index.html  class=md-nav__link >System Regression Models</a> <ul class=md-nav__list > <li class=md-nav__item > <a href="examples/examples.html" class=md-nav__link >Examples</a> <li class=md-nav__item > <a href="examples/formulas.html" class=md-nav__link >Using formulas to specify models</a> <li class=md-nav__item > <a href="examples/three-stage-ls.html" class=md-nav__link >Three-stage Least Squares (3SLS)</a> <li class=md-nav__item > <a href="examples/three-stage-ls.html#System-GMM-Estimation" class=md-nav__link >System GMM Estimation</a> <li class=md-nav__item > <a href=reference.html  class=md-nav__link >Module Reference</a> <li class=md-nav__item > <a href=mathematical-formula.html  class=md-nav__link >Formulas and Mathematical Detail</a> </ul> <li class=md-nav__item > <a href="../utility.html" class=md-nav__link >Utilities</a> <li class=md-nav__item > <a href="../plan.html" class=md-nav__link >Module Plans</a> <li class=md-nav__item > <a href="../contributing.html" class=md-nav__link >Contributing</a> <li class=md-nav__item > <a href="../changes.html" class=md-nav__link >Change Log</a> <li class=md-nav__item > <a href="../references.html" class=md-nav__link >References</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#system-models--page-root" class=md-nav__link >System Regression Estimators</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#seemingly-unrelated-regression-sur-sure" class=md-nav__link >Seemingly Unrelated Regression (SUR/SURE)</a> <li class=md-nav__item ><a href="#three-stage-least-squares-3sls" class=md-nav__link >Three-Stage Least Squares (3SLS)</a> <li class=md-nav__item ><a href="#generalized-method-of-moments-gmm-estimation-of-systems" class=md-nav__link >Generalized Method of Moments (GMM) Estimation of Systems</a> </ul> </nav> <li class=md-nav__item ><a class=md-nav__extra_link  href="../_sources/system/models.rst.txt">Show Source</a> <li id=searchbox  class=md-nav__item > </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <span id=system-regression-estimators ></span><span id=system-models-module-reference-models ></span><h1 id=system-models--page-root >System Regression Estimators<a class=headerlink  href="#system-models--page-root" title="Permalink to this headline">¶</a></h1> <h2 id=seemingly-unrelated-regression-sur-sure >Seemingly Unrelated Regression (SUR/SURE)<a class=headerlink  href="#seemingly-unrelated-regression-sur-sure" title="Permalink to this headline">¶</a></h2> <dl class=class > <dt id=linearmodels.system.model.SUR > <em class=property >class </em><code class="sig-name descname">SUR</code><span class=sig-paren >(</span><em class=sig-param >equations</em>, <em class=sig-param >*</em>, <em class=sig-param >sigma=None</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#SUR"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.SUR" title="Permalink to this definition">¶</a> <dd><p>Seemingly unrelated regression estimation (SUR/SURE)</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>equations</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Dictionary-like structure containing dependent and exogenous variable values. Each key is an equations label and must be a string. Each value must be either a tuple of the form (dependent, exog, [weights]) or a dictionary with keys ‘dependent’ and ‘exog’ and the optional key ‘weights’.</p> <li><p><strong>sigma</strong> (<em>array-like</em>) – Prespecified residual covariance to use in GLS estimation. If not provided, FGLS is implemented based on an estimate of sigma.</p> </ul> </dl> <p class=rubric >Notes</p> <p>Estimates a set of regressions which are seemingly unrelated in the sense that separate estimation would lead to consistent parameter estimates. Each equation is of the form</p> <div class="math notranslate nohighlight"> \[y_{i,k} = x_{i,k}\beta_i + \epsilon_{i,k}\]</div> <p>where k denotes the equation and i denoted the observation index. By stacking vertically arrays of dependent and placing the exogenous variables into a block diagonal array, the entire system can be compactly expressed as</p> <div class="math notranslate nohighlight"> \[Y = X\beta + \epsilon\]</div> <p>where</p> <div class="math notranslate nohighlight"> \[\begin{split}Y = \left[\begin{array}{x}Y_1 \\ Y_2 \\ \vdots \\ Y_K\end{array}\right]\end{split}\]</div> <p>and</p> <div class="math notranslate nohighlight"> \[\begin{split}X = \left[\begin{array}{cccc} X_1 &amp; 0 &amp; \ldots &amp; 0 \\ 0 &amp; X_2 &amp; \dots &amp; 0 \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ 0 &amp; 0 &amp; \dots &amp; X_K \end{array}\right]\end{split}\]</div> <p>The system OLS estimator is</p> <div class="math notranslate nohighlight"> \[\hat{\beta}_{OLS} = (X'X)^{-1}X'Y\]</div> <p>When certain conditions are satisfied, a GLS estimator of the form</p> <div class="math notranslate nohighlight"> \[\hat{\beta}_{GLS} = (X'\Omega^{-1}X)^{-1}X'\Omega^{-1}Y\]</div> <p>can improve accuracy of coefficient estimates where</p> <div class="math notranslate nohighlight"> \[\Omega = \Sigma \otimes I_N\]</div> <p>where <span class="math notranslate nohighlight">\(\Sigma\)</span> is the covariance matrix of the residuals.</p> <p>SUR is a special case of 3SLS where there are no endogenous regressors and no instruments.</p> <dl class=method > <dt id=linearmodels.system.model.SUR.add_constraints > <code class="sig-name descname">add_constraints</code><span class=sig-paren >(</span><em class=sig-param >r</em>, <em class=sig-param >q=None</em><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.SUR.add_constraints" title="Permalink to this definition">¶</a> <dd><dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>r</strong> (<em>DataFrame</em>) – Constraint matrix. nconstraints by nparameters</p> <li><p><strong>q</strong> (<em>Series</em><em>, </em><em>optional</em>) – Constraint values (nconstraints). If not set, set to 0</p> </ul> </dl> <p class=rubric >Notes</p> <p>Constraints are of the form</p> <div class="math notranslate nohighlight"> \[r \beta = q\]</div> <p>The property <cite>param_names</cite> can be used to determine the order of parameters.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.constraints > <em class=property >property </em><code class="sig-name descname">constraints</code><a class=headerlink  href="#linearmodels.system.model.SUR.constraints" title="Permalink to this definition">¶</a> <dd><p>Model constraints</p> <dl class="field-list simple"> <dt class=field-odd >Returns <dd class=field-odd ><p><strong>cons</strong> – Constraint object</p> <dt class=field-even >Return type <dd class=field-even ><p>LinearConstraint</p> </dl> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.fit > <code class="sig-name descname">fit</code><span class=sig-paren >(</span><em class=sig-param >*</em>, <em class=sig-param >method=None</em>, <em class=sig-param >full_cov=True</em>, <em class=sig-param >iterate=False</em>, <em class=sig-param >iter_limit=100</em>, <em class=sig-param >tol=1e-06</em>, <em class=sig-param >cov_type='robust'</em>, <em class=sig-param >**cov_config</em><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.SUR.fit" title="Permalink to this definition">¶</a> <dd><p>Estimate model parameters</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>method</strong> (<em>{None</em><em>, </em><em>'gls'</em><em>, </em><em>'ols'}</em>) – Estimation method. Default auto selects based on regressors, using OLS only if all regressors are identical. The other two arguments force the use of GLS or OLS.</p> <li><p><strong>full_cov</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Flag indicating whether to utilize information in correlations when estimating the model with GLS</p> <li><p><strong>iterate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Flag indicating to iterate GLS until convergence of iter limit iterations have been completed</p> <li><p><strong>iter_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Maximum number of iterations for iterative GLS</p> <li><p><strong>tol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Tolerance to use when checking for convergence in iterative GLS</p> <li><p><strong>cov_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Name of covariance estimator. Valid options are</p> <ul> <li><p>’unadjusted’, ‘homoskedastic’ - Classic covariance estimator</p> <li><p>’robust’, ‘heteroskedastic’ - Heteroskedasticity robust covariance estimator</p> <li><p>’kernel’ - Allows for heteroskedasticity and autocorrelation</p> </ul> </p> <li><p><strong>**cov_config</strong> – Additional parameters to pass to covariance estimator. All estimators support debiased which employs a small-sample adjustment</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>results</strong> – Estimation results</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="results.html#linearmodels.system.results.SystemResults" title=linearmodels.system.results.SystemResults >SystemResults</a></p> </dl> <div class="admonition seealso"> <p class=admonition-title >See also</p> <p><a class="reference internal" href="covariance.html#linearmodels.system.covariance.HomoskedasticCovariance" title=linearmodels.system.covariance.HomoskedasticCovariance ><code class="xref py py-meth docutils literal notranslate"><span class=pre >linearmodels.system.covariance.HomoskedasticCovariance()</span></code></a>, <a class="reference internal" href="covariance.html#linearmodels.system.covariance.HeteroskedasticCovariance" title=linearmodels.system.covariance.HeteroskedasticCovariance ><code class="xref py py-meth docutils literal notranslate"><span class=pre >linearmodels.system.covariance.HeteroskedasticCovariance()</span></code></a>, <a class="reference internal" href="covariance.html#linearmodels.system.covariance.KernelCovariance" title=linearmodels.system.covariance.KernelCovariance ><code class="xref py py-meth docutils literal notranslate"><span class=pre >linearmodels.system.covariance.KernelCovariance()</span></code></a></p> </div> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.formula > <em class=property >property </em><code class="sig-name descname">formula</code><a class=headerlink  href="#linearmodels.system.model.SUR.formula" title="Permalink to this definition">¶</a> <dd><p>Set or get the formula used to construct the model</p> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.from_formula > <em class=property >classmethod </em><code class="sig-name descname">from_formula</code><span class=sig-paren >(</span><em class=sig-param >formula</em>, <em class=sig-param >data</em>, <em class=sig-param >*</em>, <em class=sig-param >sigma=None</em>, <em class=sig-param >weights=None</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#SUR.from_formula"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.SUR.from_formula" title="Permalink to this definition">¶</a> <dd><p>Specify a SUR using the formula interface</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>formula</strong> (<em>{str</em><em>, </em><em>dict-like}</em>) – Either a string or a dictionary of strings where each value in the dictionary represents a single equation. See Notes for a description of the accepted syntax</p> <li><p><strong>data</strong> (<em>DataFrame</em>) – Frame containing named variables</p> <li><p><strong>sigma</strong> (<em>array-like</em>) – Prespecified residual covariance to use in GLS estimation. If not provided, FGLS is implemented based on an estimate of sigma.</p> <li><p><strong>weights</strong> (<em>dict-like</em>) – Dictionary like object (e.g. a DataFrame) containing variable weights. Each entry must have the same number of observations as data. If an equation label is not a key weights, the weights will be set to unity</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>model</strong> – Model instance</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="#linearmodels.system.model.SUR" title=linearmodels.system.model.SUR >SUR</a></p> </dl> <p class=rubric >Notes</p> <p>Models can be specified in one of two ways. The first uses curly braces to encapsulate equations. The second uses a dictionary where each key is an equation name.</p> <p class=rubric >Examples</p> <p>The simplest format uses standard Patsy formulas for each equation in a dictionary. Best practice is to use an Ordered Dictionary</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=kn >import</span> <span class=nn >pandas</span> <span class=k >as</span> <span class=nn >pd</span>
<span class=gp >&gt;&gt;&gt; </span><span class=kn >import</span> <span class=nn >numpy</span> <span class=k >as</span> <span class=nn >np</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >data</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >DataFrame</span><span class=p >(</span><span class=n >np</span><span class=o >.</span><span class=n >random</span><span class=o >.</span><span class=n >randn</span><span class=p >(</span><span class=mi >500</span><span class=p >,</span> <span class=mi >4</span><span class=p >),</span> <span class=n >columns</span><span class=o >=</span><span class=p >[</span><span class=s1 >'y1'</span><span class=p >,</span> <span class=s1 >'x1_1'</span><span class=p >,</span> <span class=s1 >'y2'</span><span class=p >,</span> <span class=s1 >'x2_1'</span><span class=p >])</span>
<span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span> <span class=nn >linearmodels.system</span> <span class=k >import</span> <span class=n >SUR</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=p >{</span><span class=s1 >'eq1'</span><span class=p >:</span> <span class=s1 >'y1 ~ 1 + x1_1'</span><span class=p >,</span> <span class=s1 >'eq2'</span><span class=p >:</span> <span class=s1 >'y2 ~ 1 + x2_1'</span><span class=p >}</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >SUR</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> <p>The second format uses curly braces {} to surround distinct equations</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=s1 >'{y1 ~ 1 + x1_1} {y2 ~ 1 + x2_1}'</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >SUR</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> <p>It is also possible to include equation labels when using curly braces</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=s1 >'{eq1: y1 ~ 1 + x1_1} {eq2: y2 ~ 1 + x2_1}'</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >SUR</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.has_constant > <em class=property >property </em><code class="sig-name descname">has_constant</code><a class=headerlink  href="#linearmodels.system.model.SUR.has_constant" title="Permalink to this definition">¶</a> <dd><p>Vector indicating which equations contain constants</p> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.multivariate_ls > <em class=property >classmethod </em><code class="sig-name descname">multivariate_ls</code><span class=sig-paren >(</span><em class=sig-param >dependent</em>, <em class=sig-param >exog</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#SUR.multivariate_ls"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.SUR.multivariate_ls" title="Permalink to this definition">¶</a> <dd><p>Interface for specification of multivariate regression models</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>dependent</strong> (<em>array-like</em>) – nobs by ndep array of dependent variables</p> <li><p><strong>exog</strong> (<em>array-like</em>) – nobs by nvar array of exogenous regressors common to all models</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>model</strong> – Model instance</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="#linearmodels.system.model.SUR" title=linearmodels.system.model.SUR >SUR</a></p> </dl> <p class=rubric >Notes</p> <p>Utility function to simplify the construction of multivariate regression models which all use the same regressors. Constructs the dictionary of equations from the variables using the common exogenous variable.</p> <p class=rubric >Examples</p> <p>A simple CAP-M can be estimated as a multivariate regression</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span> <span class=nn >linearmodels.datasets</span> <span class=k >import</span> <span class=n >french</span>
<span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span> <span class=nn >linearmodels.system</span> <span class=k >import</span> <span class=n >SUR</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >data</span> <span class=o >=</span> <span class=n >french</span><span class=o >.</span><span class=n >load</span><span class=p >()</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >portfolios</span> <span class=o >=</span> <span class=n >data</span><span class=p >[[</span><span class=s1 >'S1V1'</span><span class=p >,</span><span class=s1 >'S1V5'</span><span class=p >,</span><span class=s1 >'S5V1'</span><span class=p >,</span><span class=s1 >'S5V5'</span><span class=p >]]</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >factors</span> <span class=o >=</span> <span class=n >data</span><span class=p >[[</span><span class=s1 >'MktRF'</span><span class=p >]]</span><span class=o >.</span><span class=n >copy</span><span class=p >()</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >factors</span><span class=p >[</span><span class=s1 >'alpha'</span><span class=p >]</span> <span class=o >=</span> <span class=mi >1</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >SUR</span><span class=o >.</span><span class=n >multivariate_ls</span><span class=p >(</span><span class=n >portfolios</span><span class=p >,</span> <span class=n >factors</span><span class=p >)</span>
</pre></div> </div> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.param_names > <em class=property >property </em><code class="sig-name descname">param_names</code><a class=headerlink  href="#linearmodels.system.model.SUR.param_names" title="Permalink to this definition">¶</a> <dd><p>Model parameter names</p> <dl class="field-list simple"> <dt class=field-odd >Returns <dd class=field-odd ><p><strong>names</strong> – Normalized, unique model parameter names</p> <dt class=field-even >Return type <dd class=field-even ><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p> </dl> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.predict > <code class="sig-name descname">predict</code><span class=sig-paren >(</span><em class=sig-param >params</em>, <em class=sig-param >*</em>, <em class=sig-param >equations=None</em>, <em class=sig-param >data=None</em>, <em class=sig-param >eval_env=8</em><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.SUR.predict" title="Permalink to this definition">¶</a> <dd><p>Predict values for additional data</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>params</strong> (<em>array-like</em>) – Model parameters (nvar by 1)</p> <li><p><strong>equations</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Dictionary-like structure containing exogenous and endogenous variables. Each key is an equations label and must match the labels used to fir the model. Each value must be either a tuple of the form (exog, endog) or a dictionary with keys ‘exog’ and ‘endog’. If predictions are not required for one of more of the model equations, these keys can be omitted.</p> <li><p><strong>data</strong> (<em>DataFrame</em>) – Values to use when making predictions from a model constructed from a formula</p> <li><p><strong>eval_env</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Depth of use when evaluating formulas using Patsy.</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>predictions</strong> – Fitted values from supplied data and parameters</p> <dt class=field-odd >Return type <dd class=field-odd ><p>DataFrame</p> </dl> <p class=rubric >Notes</p> <p>If <cite>data</cite> is not none, then <cite>equations</cite> must be none. Predictions from models constructed using formulas can be computed using either <cite>equations</cite>, which will treat these are arrays of values corresponding to the formula-process data, or using <cite>data</cite> which will be processed using the formula used to construct the values corresponding to the original model specification.</p> <p>When using <cite>exog</cite> and <cite>endog</cite>, the regressor array for a particular equation is assembled as <cite>[equations[eqn][‘exog’], equations[eqn][‘endog’]]</cite> where <cite>eqn</cite> is an equation label. These must correspond to the columns in the estimated model.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.SUR.reset_constraints > <code class="sig-name descname">reset_constraints</code><span class=sig-paren >(</span><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.SUR.reset_constraints" title="Permalink to this definition">¶</a> <dd><p>Remove all model constraints</p> </dl> </dl> <h2 id=three-stage-least-squares-3sls >Three-Stage Least Squares (3SLS)<a class=headerlink  href="#three-stage-least-squares-3sls" title="Permalink to this headline">¶</a></h2> <dl class=class > <dt id=linearmodels.system.model.IV3SLS > <em class=property >class </em><code class="sig-name descname">IV3SLS</code><span class=sig-paren >(</span><em class=sig-param >equations</em>, <em class=sig-param >*</em>, <em class=sig-param >sigma=None</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IV3SLS"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IV3SLS" title="Permalink to this definition">¶</a> <dd><p>Three-stage Least Squares (3SLS) Estimator</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>equations</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Dictionary-like structure containing dependent, exogenous, endogenous and instrumental variables. Each key is an equations label and must be a string. Each value must be either a tuple of the form (dependent, exog, endog, instrument[, weights]) or a dictionary with keys ‘dependent’, and at least one of ‘exog’ or ‘endog’ and ‘instruments’. When using a tuple, values must be provided for all 4 variables, although either empty arrays or <cite>None</cite> can be passed if a category of variable is not included in a model. The dictionary may contain optional keys for ‘exog’, ‘endog’, ‘instruments’, and ‘weights’. ‘exog’ can be omitted if all variables in an equation are endogenous. Alternatively, ‘exog’ can contain either an empty array or <cite>None</cite> to indicate that an equation contains no exogenous regressors. Similarly ‘endog’ and ‘instruments’ can either be omitted or may contain an empty array (or <cite>None</cite>) if all variables in an equation are exogenous.</p> <li><p><strong>sigma</strong> (<em>array-like</em>) – Prespecified residual covariance to use in GLS estimation. If not provided, FGLS is implemented based on an estimate of sigma.</p> </ul> </dl> <p class=rubric >Notes</p> <p>Estimates a set of regressions which are seemingly unrelated in the sense that separate estimation would lead to consistent parameter estimates. Each equation is of the form</p> <div class="math notranslate nohighlight"> \[y_{i,k} = x_{i,k}\beta_i + \epsilon_{i,k}\]</div> <p>where k denotes the equation and i denoted the observation index. By stacking vertically arrays of dependent and placing the exogenous variables into a block diagonal array, the entire system can be compactly expressed as</p> <div class="math notranslate nohighlight"> \[Y = X\beta + \epsilon\]</div> <p>where</p> <div class="math notranslate nohighlight"> \[\begin{split}Y = \left[\begin{array}{x}Y_1 \\ Y_2 \\ \vdots \\ Y_K\end{array}\right]\end{split}\]</div> <p>and</p> <div class="math notranslate nohighlight"> \[\begin{split}X = \left[\begin{array}{cccc} X_1 &amp; 0 &amp; \ldots &amp; 0 \\ 0 &amp; X_2 &amp; \dots &amp; 0 \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ 0 &amp; 0 &amp; \dots &amp; X_K \end{array}\right]\end{split}\]</div> <p>The system instrumental variable (IV) estimator is</p> <div class="math notranslate nohighlight"> \[\begin{split}\hat{\beta}_{IV} &amp; = (X'Z(Z'Z)^{-1}Z'X)^{-1}X'Z(Z'Z)^{-1}Z'Y \\ &amp; = (\hat{X}'\hat{X})^{-1}\hat{X}'Y\end{split}\]</div> <p>where <span class="math notranslate nohighlight">\(\hat{X} = Z(Z'Z)^{-1}Z'X\)</span> and. When certain conditions are satisfied, a GLS estimator of the form</p> <div class="math notranslate nohighlight"> \[\hat{\beta}_{3SLS} = (\hat{X}'\Omega^{-1}\hat{X})^{-1}\hat{X}'\Omega^{-1}Y\]</div> <p>can improve accuracy of coefficient estimates where</p> <div class="math notranslate nohighlight"> \[\Omega = \Sigma \otimes I_N\]</div> <p>where <span class="math notranslate nohighlight">\(\Sigma\)</span> is the covariance matrix of the residuals.</p> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.add_constraints > <code class="sig-name descname">add_constraints</code><span class=sig-paren >(</span><em class=sig-param >r</em>, <em class=sig-param >q=None</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IV3SLS.add_constraints"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IV3SLS.add_constraints" title="Permalink to this definition">¶</a> <dd><dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>r</strong> (<em>DataFrame</em>) – Constraint matrix. nconstraints by nparameters</p> <li><p><strong>q</strong> (<em>Series</em><em>, </em><em>optional</em>) – Constraint values (nconstraints). If not set, set to 0</p> </ul> </dl> <p class=rubric >Notes</p> <p>Constraints are of the form</p> <div class="math notranslate nohighlight"> \[r \beta = q\]</div> <p>The property <cite>param_names</cite> can be used to determine the order of parameters.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.constraints > <em class=property >property </em><code class="sig-name descname">constraints</code><a class=headerlink  href="#linearmodels.system.model.IV3SLS.constraints" title="Permalink to this definition">¶</a> <dd><p>Model constraints</p> <dl class="field-list simple"> <dt class=field-odd >Returns <dd class=field-odd ><p><strong>cons</strong> – Constraint object</p> <dt class=field-even >Return type <dd class=field-even ><p>LinearConstraint</p> </dl> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.fit > <code class="sig-name descname">fit</code><span class=sig-paren >(</span><em class=sig-param >*</em>, <em class=sig-param >method=None</em>, <em class=sig-param >full_cov=True</em>, <em class=sig-param >iterate=False</em>, <em class=sig-param >iter_limit=100</em>, <em class=sig-param >tol=1e-06</em>, <em class=sig-param >cov_type='robust'</em>, <em class=sig-param >**cov_config</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IV3SLS.fit"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IV3SLS.fit" title="Permalink to this definition">¶</a> <dd><p>Estimate model parameters</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>method</strong> (<em>{None</em><em>, </em><em>'gls'</em><em>, </em><em>'ols'}</em>) – Estimation method. Default auto selects based on regressors, using OLS only if all regressors are identical. The other two arguments force the use of GLS or OLS.</p> <li><p><strong>full_cov</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Flag indicating whether to utilize information in correlations when estimating the model with GLS</p> <li><p><strong>iterate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Flag indicating to iterate GLS until convergence of iter limit iterations have been completed</p> <li><p><strong>iter_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Maximum number of iterations for iterative GLS</p> <li><p><strong>tol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Tolerance to use when checking for convergence in iterative GLS</p> <li><p><strong>cov_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Name of covariance estimator. Valid options are</p> <ul> <li><p>’unadjusted’, ‘homoskedastic’ - Classic covariance estimator</p> <li><p>’robust’, ‘heteroskedastic’ - Heteroskedasticity robust covariance estimator</p> <li><p>’kernel’ - Allows for heteroskedasticity and autocorrelation</p> </ul> </p> <li><p><strong>**cov_config</strong> – Additional parameters to pass to covariance estimator. All estimators support debiased which employs a small-sample adjustment</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>results</strong> – Estimation results</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="results.html#linearmodels.system.results.SystemResults" title=linearmodels.system.results.SystemResults >SystemResults</a></p> </dl> <div class="admonition seealso"> <p class=admonition-title >See also</p> <p><a class="reference internal" href="covariance.html#linearmodels.system.covariance.HomoskedasticCovariance" title=linearmodels.system.covariance.HomoskedasticCovariance ><code class="xref py py-meth docutils literal notranslate"><span class=pre >linearmodels.system.covariance.HomoskedasticCovariance()</span></code></a>, <a class="reference internal" href="covariance.html#linearmodels.system.covariance.HeteroskedasticCovariance" title=linearmodels.system.covariance.HeteroskedasticCovariance ><code class="xref py py-meth docutils literal notranslate"><span class=pre >linearmodels.system.covariance.HeteroskedasticCovariance()</span></code></a>, <a class="reference internal" href="covariance.html#linearmodels.system.covariance.KernelCovariance" title=linearmodels.system.covariance.KernelCovariance ><code class="xref py py-meth docutils literal notranslate"><span class=pre >linearmodels.system.covariance.KernelCovariance()</span></code></a></p> </div> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.formula > <em class=property >property </em><code class="sig-name descname">formula</code><a class=headerlink  href="#linearmodels.system.model.IV3SLS.formula" title="Permalink to this definition">¶</a> <dd><p>Set or get the formula used to construct the model</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.from_formula > <em class=property >classmethod </em><code class="sig-name descname">from_formula</code><span class=sig-paren >(</span><em class=sig-param >formula</em>, <em class=sig-param >data</em>, <em class=sig-param >*</em>, <em class=sig-param >sigma=None</em>, <em class=sig-param >weights=None</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IV3SLS.from_formula"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IV3SLS.from_formula" title="Permalink to this definition">¶</a> <dd><p>Specify a 3SLS using the formula interface</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>formula</strong> (<em>{str</em><em>, </em><em>dict-like}</em>) – Either a string or a dictionary of strings where each value in the dictionary represents a single equation. See Notes for a description of the accepted syntax</p> <li><p><strong>data</strong> (<em>DataFrame</em>) – Frame containing named variables</p> <li><p><strong>sigma</strong> (<em>array-like</em>) – Prespecified residual covariance to use in GLS estimation. If not provided, FGLS is implemented based on an estimate of sigma.</p> <li><p><strong>weights</strong> (<em>dict-like</em>) – Dictionary like object (e.g. a DataFrame) containing variable weights. Each entry must have the same number of observations as data. If an equation label is not a key weights, the weights will be set to unity</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>model</strong> – Model instance</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="#linearmodels.system.model.IV3SLS" title=linearmodels.system.model.IV3SLS >IV3SLS</a></p> </dl> <p class=rubric >Notes</p> <p>Models can be specified in one of two ways. The first uses curly braces to encapsulate equations. The second uses a dictionary where each key is an equation name.</p> <p class=rubric >Examples</p> <p>The simplest format uses standard Patsy formulas for each equation in a dictionary. Best practice is to use an Ordered Dictionary</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=kn >import</span> <span class=nn >pandas</span> <span class=k >as</span> <span class=nn >pd</span>
<span class=gp >&gt;&gt;&gt; </span><span class=kn >import</span> <span class=nn >numpy</span> <span class=k >as</span> <span class=nn >np</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >cols</span> <span class=o >=</span> <span class=p >[</span><span class=s1 >'y1'</span><span class=p >,</span> <span class=s1 >'x1_1'</span><span class=p >,</span> <span class=s1 >'x1_2'</span><span class=p >,</span> <span class=s1 >'z1'</span><span class=p >,</span> <span class=s1 >'y2'</span><span class=p >,</span> <span class=s1 >'x2_1'</span><span class=p >,</span> <span class=s1 >'x2_2'</span><span class=p >,</span> <span class=s1 >'z2'</span><span class=p >]</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >data</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >DataFrame</span><span class=p >(</span><span class=n >np</span><span class=o >.</span><span class=n >random</span><span class=o >.</span><span class=n >randn</span><span class=p >(</span><span class=mi >500</span><span class=p >,</span> <span class=mi >8</span><span class=p >),</span> <span class=n >columns</span><span class=o >=</span><span class=n >cols</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span> <span class=nn >linearmodels.system</span> <span class=k >import</span> <span class=n >IV3SLS</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=p >{</span><span class=s1 >'eq1'</span><span class=p >:</span> <span class=s1 >'y1 ~ 1 + x1_1 + [x1_2 ~ z1]'</span><span class=p >,</span>
<span class=gp >... </span>           <span class=s1 >'eq2'</span><span class=p >:</span> <span class=s1 >'y2 ~ 1 + x2_1 + [x2_2 ~ z2]'</span><span class=p >}</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >IV3SLS</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> <p>The second format uses curly braces {} to surround distinct equations</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=s1 >'{y1 ~ 1 + x1_1 + [x1_2 ~ z1]} {y2 ~ 1 + x2_1 + [x2_2 ~ z2]}'</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >IV3SLS</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> <p>It is also possible to include equation labels when using curly braces</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=s1 >'{eq1: y1 ~ 1 + x1_1 + [x1_2 ~ z1]} {eq2: y2 ~ 1 + x2_1 + [x2_2 ~ z2]}'</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >IV3SLS</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.has_constant > <em class=property >property </em><code class="sig-name descname">has_constant</code><a class=headerlink  href="#linearmodels.system.model.IV3SLS.has_constant" title="Permalink to this definition">¶</a> <dd><p>Vector indicating which equations contain constants</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.multivariate_ls > <em class=property >classmethod </em><code class="sig-name descname">multivariate_ls</code><span class=sig-paren >(</span><em class=sig-param >dependent</em>, <em class=sig-param >exog=None</em>, <em class=sig-param >endog=None</em>, <em class=sig-param >instruments=None</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IV3SLS.multivariate_ls"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IV3SLS.multivariate_ls" title="Permalink to this definition">¶</a> <dd><p>Interface for specification of multivariate IV models</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>dependent</strong> (<em>array-like</em>) – nobs by ndep array of dependent variables</p> <li><p><strong>exog</strong> (<em>array-like</em><em>, </em><em>optional</em>) – nobs by nexog array of exogenous regressors common to all models</p> <li><p><strong>endog</strong> (<em>array-like</em><em>, </em><em>optional</em>) – nobs by nendog array of endogenous regressors common to all models</p> <li><p><strong>instruments</strong> (<em>array-like</em><em>, </em><em>optional</em>) – nobs by ninstr array of instruments to use in all equations</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>model</strong> – Model instance</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="#linearmodels.system.model.IV3SLS" title=linearmodels.system.model.IV3SLS >IV3SLS</a></p> </dl> <p class=rubric >Notes</p> <p>At least one of exog or endog must be provided.</p> <p>Utility function to simplify the construction of multivariate IV models which all use the same regressors and instruments. Constructs the dictionary of equations from the variables using the common exogenous, endogenous and instrumental variables.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.param_names > <em class=property >property </em><code class="sig-name descname">param_names</code><a class=headerlink  href="#linearmodels.system.model.IV3SLS.param_names" title="Permalink to this definition">¶</a> <dd><p>Model parameter names</p> <dl class="field-list simple"> <dt class=field-odd >Returns <dd class=field-odd ><p><strong>names</strong> – Normalized, unique model parameter names</p> <dt class=field-even >Return type <dd class=field-even ><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p> </dl> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.predict > <code class="sig-name descname">predict</code><span class=sig-paren >(</span><em class=sig-param >params</em>, <em class=sig-param >*</em>, <em class=sig-param >equations=None</em>, <em class=sig-param >data=None</em>, <em class=sig-param >eval_env=8</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IV3SLS.predict"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IV3SLS.predict" title="Permalink to this definition">¶</a> <dd><p>Predict values for additional data</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>params</strong> (<em>array-like</em>) – Model parameters (nvar by 1)</p> <li><p><strong>equations</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Dictionary-like structure containing exogenous and endogenous variables. Each key is an equations label and must match the labels used to fir the model. Each value must be either a tuple of the form (exog, endog) or a dictionary with keys ‘exog’ and ‘endog’. If predictions are not required for one of more of the model equations, these keys can be omitted.</p> <li><p><strong>data</strong> (<em>DataFrame</em>) – Values to use when making predictions from a model constructed from a formula</p> <li><p><strong>eval_env</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Depth of use when evaluating formulas using Patsy.</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>predictions</strong> – Fitted values from supplied data and parameters</p> <dt class=field-odd >Return type <dd class=field-odd ><p>DataFrame</p> </dl> <p class=rubric >Notes</p> <p>If <cite>data</cite> is not none, then <cite>equations</cite> must be none. Predictions from models constructed using formulas can be computed using either <cite>equations</cite>, which will treat these are arrays of values corresponding to the formula-process data, or using <cite>data</cite> which will be processed using the formula used to construct the values corresponding to the original model specification.</p> <p>When using <cite>exog</cite> and <cite>endog</cite>, the regressor array for a particular equation is assembled as <cite>[equations[eqn][‘exog’], equations[eqn][‘endog’]]</cite> where <cite>eqn</cite> is an equation label. These must correspond to the columns in the estimated model.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IV3SLS.reset_constraints > <code class="sig-name descname">reset_constraints</code><span class=sig-paren >(</span><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IV3SLS.reset_constraints"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IV3SLS.reset_constraints" title="Permalink to this definition">¶</a> <dd><p>Remove all model constraints</p> </dl> </dl> <h2 id=generalized-method-of-moments-gmm-estimation-of-systems >Generalized Method of Moments (GMM) Estimation of Systems<a class=headerlink  href="#generalized-method-of-moments-gmm-estimation-of-systems" title="Permalink to this headline">¶</a></h2> <dl class=class > <dt id=linearmodels.system.model.IVSystemGMM > <em class=property >class </em><code class="sig-name descname">IVSystemGMM</code><span class=sig-paren >(</span><em class=sig-param >equations</em>, <em class=sig-param >*</em>, <em class=sig-param >sigma=None</em>, <em class=sig-param >weight_type='robust'</em>, <em class=sig-param >**weight_config</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IVSystemGMM"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM" title="Permalink to this definition">¶</a> <dd><p>System Generalized Method of Moments (GMM) estimation of linear IV models</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>equations</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Dictionary-like structure containing dependent, exogenous, endogenous and instrumental variables. Each key is an equations label and must be a string. Each value must be either a tuple of the form (dependent, exog, endog, instrument[, weights]) or a dictionary with keys ‘dependent’, ‘exog’. The dictionary may contain optional keys for ‘endog’, ‘instruments’, and ‘weights’. Endogenous and/or Instrument can be empty if all variables in an equation are exogenous.</p> <li><p><strong>sigma</strong> (<em>array-like</em>) – Prespecified residual covariance to use in GLS estimation. If not provided, FGLS is implemented based on an estimate of sigma. Only used if weight_type is ‘unadjusted’</p> <li><p><strong>weight_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Name of moment condition weight function to use in the GMM estimation</p> <li><p><strong>**weight_config</strong> – Additional keyword arguments to pass to the moment condition weight function</p> </ul> </dl> <p class=rubric >Notes</p> <p>Estimates a linear model using GMM. Each equation is of the form</p> <div class="math notranslate nohighlight"> \[y_{i,k} = x_{i,k}\beta_i + \epsilon_{i,k}\]</div> <p>where k denotes the equation and i denoted the observation index. By stacking vertically arrays of dependent and placing the exogenous variables into a block diagonal array, the entire system can be compactly expressed as</p> <div class="math notranslate nohighlight"> \[Y = X\beta + \epsilon\]</div> <p>where</p> <div class="math notranslate nohighlight"> \[\begin{split}Y = \left[\begin{array}{x}Y_1 \\ Y_2 \\ \vdots \\ Y_K\end{array}\right]\end{split}\]</div> <p>and</p> <div class="math notranslate nohighlight"> \[\begin{split}X = \left[\begin{array}{cccc} X_1 &amp; 0 &amp; \ldots &amp; 0 \\ 0 &amp; X_2 &amp; \dots &amp; 0 \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ 0 &amp; 0 &amp; \dots &amp; X_K \end{array}\right]\end{split}\]</div> <p>The system GMM estimator uses the moment condition</p> <div class="math notranslate nohighlight"> \[z_{ij}(y_{ij} - x_{ij}\beta_j) = 0\]</div> <p>where j indexes the equation. The estimator for the coefficients is given by</p> <div class="math notranslate nohighlight"> \[\begin{split}\hat{\beta}_{GMM} &amp; = (X'ZW^{-1}Z'X)^{-1}X'ZW^{-1}Z'Y \\\end{split}\]</div> <p>where <span class="math notranslate nohighlight">\(W\)</span> is a positive definite weighting matrix.</p> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.add_constraints > <code class="sig-name descname">add_constraints</code><span class=sig-paren >(</span><em class=sig-param >r</em>, <em class=sig-param >q=None</em><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.add_constraints" title="Permalink to this definition">¶</a> <dd><dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>r</strong> (<em>DataFrame</em>) – Constraint matrix. nconstraints by nparameters</p> <li><p><strong>q</strong> (<em>Series</em><em>, </em><em>optional</em>) – Constraint values (nconstraints). If not set, set to 0</p> </ul> </dl> <p class=rubric >Notes</p> <p>Constraints are of the form</p> <div class="math notranslate nohighlight"> \[r \beta = q\]</div> <p>The property <cite>param_names</cite> can be used to determine the order of parameters.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.constraints > <em class=property >property </em><code class="sig-name descname">constraints</code><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.constraints" title="Permalink to this definition">¶</a> <dd><p>Model constraints</p> <dl class="field-list simple"> <dt class=field-odd >Returns <dd class=field-odd ><p><strong>cons</strong> – Constraint object</p> <dt class=field-even >Return type <dd class=field-even ><p>LinearConstraint</p> </dl> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.fit > <code class="sig-name descname">fit</code><span class=sig-paren >(</span><em class=sig-param >*</em>, <em class=sig-param >iter_limit=2</em>, <em class=sig-param >tol=1e-06</em>, <em class=sig-param >initial_weight=None</em>, <em class=sig-param >cov_type='robust'</em>, <em class=sig-param >**cov_config</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IVSystemGMM.fit"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.fit" title="Permalink to this definition">¶</a> <dd><p>Estimate model parameters</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>iter_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Maximum number of iterations for iterative GLS</p> <li><p><strong>tol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Tolerance to use when checking for convergence in iterative GLS</p> <li><p><strong>initial_weight</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – Initial weighting matrix to use in the first step. If not specified, uses the average outer-product of the set containing the exogenous variables and instruments.</p> <li><p><strong>cov_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Name of covariance estimator. Valid options are</p> <ul> <li><p>’unadjusted’, ‘homoskedastic’ - Classic covariance estimator</p> <li><p>’robust’, ‘heteroskedastic’ - Heteroskedasticity robust covariance estimator</p> </ul> </p> <li><p><strong>**cov_config</strong> – Additional parameters to pass to covariance estimator. All estimators support debiased which employs a small-sample adjustment</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>results</strong> – Estimation results</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="results.html#linearmodels.system.results.GMMSystemResults" title=linearmodels.system.results.GMMSystemResults >GMMSystemResults</a></p> </dl> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.formula > <em class=property >property </em><code class="sig-name descname">formula</code><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.formula" title="Permalink to this definition">¶</a> <dd><p>Set or get the formula used to construct the model</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.from_formula > <em class=property >classmethod </em><code class="sig-name descname">from_formula</code><span class=sig-paren >(</span><em class=sig-param >formula</em>, <em class=sig-param >data</em>, <em class=sig-param >*</em>, <em class=sig-param >weights=None</em>, <em class=sig-param >weight_type='robust'</em>, <em class=sig-param >**weight_config</em><span class=sig-paren >)</span><a class="reference internal" href="../_modules/linearmodels/system/model.html#IVSystemGMM.from_formula"><span class=viewcode-link >[source]</span></a><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.from_formula" title="Permalink to this definition">¶</a> <dd><p>Specify a 3SLS using the formula interface</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>formula</strong> (<em>{str</em><em>, </em><em>dict-like}</em>) – Either a string or a dictionary of strings where each value in the dictionary represents a single equation. See Notes for a description of the accepted syntax</p> <li><p><strong>data</strong> (<em>DataFrame</em>) – Frame containing named variables</p> <li><p><strong>weights</strong> (<em>dict-like</em>) – Dictionary like object (e.g. a DataFrame) containing variable weights. Each entry must have the same number of observations as data. If an equation label is not a key weights, the weights will be set to unity</p> <li><p><strong>weight_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Name of moment condition weight function to use in the GMM estimation. Valid options are:</p> <ul> <li><p>’unadjusted’, ‘homoskedastic’ - Assume moments are homoskedastic</p> <li><p>’robust’, ‘heteroskedastic’ - Allow for heteroskedasticity</p> </ul> </p> <li><p><strong>**weight_config</strong> – Additional keyword arguments to pass to the moment condition weight function</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>model</strong> – Model instance</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="#linearmodels.system.model.IVSystemGMM" title=linearmodels.system.model.IVSystemGMM >IVSystemGMM</a></p> </dl> <p class=rubric >Notes</p> <p>Models can be specified in one of two ways. The first uses curly braces to encapsulate equations. The second uses a dictionary where each key is an equation name.</p> <p class=rubric >Examples</p> <p>The simplest format uses standard Patsy formulas for each equation in a dictionary. Best practice is to use an Ordered Dictionary</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=kn >import</span> <span class=nn >pandas</span> <span class=k >as</span> <span class=nn >pd</span>
<span class=gp >&gt;&gt;&gt; </span><span class=kn >import</span> <span class=nn >numpy</span> <span class=k >as</span> <span class=nn >np</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >cols</span> <span class=o >=</span> <span class=p >[</span><span class=s1 >'y1'</span><span class=p >,</span> <span class=s1 >'x1_1'</span><span class=p >,</span> <span class=s1 >'x1_2'</span><span class=p >,</span> <span class=s1 >'z1'</span><span class=p >,</span> <span class=s1 >'y2'</span><span class=p >,</span> <span class=s1 >'x2_1'</span><span class=p >,</span> <span class=s1 >'x2_2'</span><span class=p >,</span> <span class=s1 >'z2'</span><span class=p >]</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >data</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >DataFrame</span><span class=p >(</span><span class=n >np</span><span class=o >.</span><span class=n >random</span><span class=o >.</span><span class=n >randn</span><span class=p >(</span><span class=mi >500</span><span class=p >,</span> <span class=mi >8</span><span class=p >),</span> <span class=n >columns</span><span class=o >=</span><span class=n >cols</span><span class=p >)</span>
<span class=gp >&gt;&gt;&gt; </span><span class=kn >from</span> <span class=nn >linearmodels.system</span> <span class=k >import</span> <span class=n >IVSystemGMM</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=p >{</span><span class=s1 >'eq1'</span><span class=p >:</span> <span class=s1 >'y1 ~ 1 + x1_1 + [x1_2 ~ z1]'</span><span class=p >,</span>
<span class=gp >... </span>           <span class=s1 >'eq2'</span><span class=p >:</span> <span class=s1 >'y2 ~ 1 + x2_1 + [x2_2 ~ z2]'</span><span class=p >}</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >IVSystemGMM</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> <p>The second format uses curly braces {} to surround distinct equations</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=s1 >'{y1 ~ 1 + x1_1 + [x1_2 ~ z1]} {y2 ~ 1 + x2_1 + [x2_2 ~ z2]}'</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >IVSystemGMM</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> <p>It is also possible to include equation labels when using curly braces</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=gp >&gt;&gt;&gt; </span><span class=n >formula</span> <span class=o >=</span> <span class=s1 >'{eq1: y1 ~ 1 + x1_1 + [x1_2 ~ z1]} {eq2: y2 ~ 1 + x2_1 + [x2_2 ~ z2]}'</span>
<span class=gp >&gt;&gt;&gt; </span><span class=n >mod</span> <span class=o >=</span> <span class=n >IVSystemGMM</span><span class=o >.</span><span class=n >from_formula</span><span class=p >(</span><span class=n >formula</span><span class=p >,</span> <span class=n >data</span><span class=p >)</span>
</pre></div> </div> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.has_constant > <em class=property >property </em><code class="sig-name descname">has_constant</code><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.has_constant" title="Permalink to this definition">¶</a> <dd><p>Vector indicating which equations contain constants</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.multivariate_ls > <em class=property >classmethod </em><code class="sig-name descname">multivariate_ls</code><span class=sig-paren >(</span><em class=sig-param >dependent</em>, <em class=sig-param >exog=None</em>, <em class=sig-param >endog=None</em>, <em class=sig-param >instruments=None</em><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.multivariate_ls" title="Permalink to this definition">¶</a> <dd><p>Interface for specification of multivariate IV models</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>dependent</strong> (<em>array-like</em>) – nobs by ndep array of dependent variables</p> <li><p><strong>exog</strong> (<em>array-like</em><em>, </em><em>optional</em>) – nobs by nexog array of exogenous regressors common to all models</p> <li><p><strong>endog</strong> (<em>array-like</em><em>, </em><em>optional</em>) – nobs by nendog array of endogenous regressors common to all models</p> <li><p><strong>instruments</strong> (<em>array-like</em><em>, </em><em>optional</em>) – nobs by ninstr array of instruments to use in all equations</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>model</strong> – Model instance</p> <dt class=field-odd >Return type <dd class=field-odd ><p><a class="reference internal" href="#linearmodels.system.model.IV3SLS" title=linearmodels.system.model.IV3SLS >IV3SLS</a></p> </dl> <p class=rubric >Notes</p> <p>At least one of exog or endog must be provided.</p> <p>Utility function to simplify the construction of multivariate IV models which all use the same regressors and instruments. Constructs the dictionary of equations from the variables using the common exogenous, endogenous and instrumental variables.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.param_names > <em class=property >property </em><code class="sig-name descname">param_names</code><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.param_names" title="Permalink to this definition">¶</a> <dd><p>Model parameter names</p> <dl class="field-list simple"> <dt class=field-odd >Returns <dd class=field-odd ><p><strong>names</strong> – Normalized, unique model parameter names</p> <dt class=field-even >Return type <dd class=field-even ><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p> </dl> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.predict > <code class="sig-name descname">predict</code><span class=sig-paren >(</span><em class=sig-param >params</em>, <em class=sig-param >*</em>, <em class=sig-param >equations=None</em>, <em class=sig-param >data=None</em>, <em class=sig-param >eval_env=8</em><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.predict" title="Permalink to this definition">¶</a> <dd><p>Predict values for additional data</p> <dl class="field-list simple"> <dt class=field-odd >Parameters <dd class=field-odd ><ul class=simple > <li><p><strong>params</strong> (<em>array-like</em>) – Model parameters (nvar by 1)</p> <li><p><strong>equations</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – Dictionary-like structure containing exogenous and endogenous variables. Each key is an equations label and must match the labels used to fir the model. Each value must be either a tuple of the form (exog, endog) or a dictionary with keys ‘exog’ and ‘endog’. If predictions are not required for one of more of the model equations, these keys can be omitted.</p> <li><p><strong>data</strong> (<em>DataFrame</em>) – Values to use when making predictions from a model constructed from a formula</p> <li><p><strong>eval_env</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Depth of use when evaluating formulas using Patsy.</p> </ul> <dt class=field-even >Returns <dd class=field-even ><p><strong>predictions</strong> – Fitted values from supplied data and parameters</p> <dt class=field-odd >Return type <dd class=field-odd ><p>DataFrame</p> </dl> <p class=rubric >Notes</p> <p>If <cite>data</cite> is not none, then <cite>equations</cite> must be none. Predictions from models constructed using formulas can be computed using either <cite>equations</cite>, which will treat these are arrays of values corresponding to the formula-process data, or using <cite>data</cite> which will be processed using the formula used to construct the values corresponding to the original model specification.</p> <p>When using <cite>exog</cite> and <cite>endog</cite>, the regressor array for a particular equation is assembled as <cite>[equations[eqn][‘exog’], equations[eqn][‘endog’]]</cite> where <cite>eqn</cite> is an equation label. These must correspond to the columns in the estimated model.</p> </dl> <dl class=method > <dt id=linearmodels.system.model.IVSystemGMM.reset_constraints > <code class="sig-name descname">reset_constraints</code><span class=sig-paren >(</span><span class=sig-paren >)</span><a class=headerlink  href="#linearmodels.system.model.IVSystemGMM.reset_constraints" title="Permalink to this definition">¶</a> <dd><p>Remove all model constraints</p> </dl> </dl> </article> </div> </div> </main> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> <a href=reference.html  title=Material  class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev > <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Previous </span> Module Reference </span> </div> </a> <a href=results.html  title=Admonition  class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next > <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Next </span> Estimation Results </span> </div> <div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2017, Kevin Sheppard. </div> Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a></div> </div> </div> </footer> <script src="../_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script> </div>